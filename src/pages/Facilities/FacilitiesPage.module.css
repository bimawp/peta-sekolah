/* FacilitiesPage.module.css
   Tema Garut (Hijau–Kuning) — modern, responsif, dengan micro-interactions
*/

/* Font */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap');

/* Variables */
:root {
  --primary-color: #1E7F4F;
  --primary-strong: #145C3C;
  --primary-soft: #56B789;
  --accent-color: #F2B705;
  --accent-strong: #C79404;

  --info: #0EA5E9;
  --warn: #F59E0B;
  --danger: #DC2626;
  --ok: #16A34A;

  --bg-primary: #F8FAFC;
  --bg-secondary: #FFFFFF;
  --bg-card: #FFFFFF;
  --bg-hover: #F1F5F9;

  --text-primary: #0F172A;
  --text-secondary: #334155;
  --text-muted: #64748B;

  --border-color: #E2E8F0;
  --border-light: #EEF2F7;

  --shadow-light: 0 1px 3px rgba(0,0,0,0.06);
  --shadow-medium: 0 4px 10px rgba(0,0,0,0.08);
  --shadow-large: 0 12px 24px rgba(0,0,0,0.12);

  --radius: 12px;
  --radius-lg: 16px;

  --transition: all .28s cubic-bezier(.4,0,.2,1);
  --t-fast: all .14s ease-out;
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg-primary: #0F172A;
    --bg-secondary: #0B1A14;
    --bg-card: #0B1A14;
    --bg-hover: #0E2119;

    --text-primary: #E6F5EC;
    --text-secondary: #CFE8DA;
    --text-muted: #8DBAA5;

    --border-color: #153A2A;
    --border-light: #112E22;

    --shadow-light: 0 1px 3px rgba(0,0,0,.35);
    --shadow-medium: 0 4px 10px rgba(0,0,0,.38);
    --shadow-large: 0 12px 24px rgba(0,0,0,.42);
  }
}

/* Reset mini + Safari selection fix */
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body {
  -webkit-user-select: none;
  user-select: none;
}

/* ===== Layout umum ===== */
.pageWrapper {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: var(--bg-primary);
  min-height: 100vh;
  color: var(--text-primary);
  line-height: 1.6;
  padding: 24px 12px;
  -webkit-user-select: none;
  user-select: none;
}

.container { max-width: 1400px; margin: 0 auto; }

/* ===== Card ===== */
.card {
  background: var(--bg-card);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-medium);
  overflow: hidden;
  transition: var(--transition);
  -webkit-user-select: none;
  user-select: none;
}
.card:hover { box-shadow: var(--shadow-large); border-color: var(--border-color); }

/* ===== Header halaman ===== */
.pageHeader { margin-bottom: 20px; }
.headerContent {
  padding: 20px 24px;
  background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-hover) 100%);
  border-bottom: 1px solid var(--border-light);
}
.pageTitle {
  font-size: clamp(22px, 3.2vw, 32px);
  font-weight: 800; letter-spacing: -0.02em;
  color: var(--text-primary);
  -webkit-user-select: text;
  user-select: text;
}
.pageSubtitle {
  color: var(--text-secondary);
  margin-top: 6px; font-size: 14px;
  -webkit-user-select: text;
  user-select: text;
}

/* ===== Summary Stats ===== */
.summaryCard { margin: 16px 0 24px; }
.statsGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 16px; padding: 16px;
}
.statItem {
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius);
  box-shadow: var(--shadow-light);
  padding: 16px; text-align: center;
  position: relative; overflow: hidden;
  transition: var(--transition);
}
.statItem::before {
  content: '';
  position: absolute; inset: 0 0 auto 0; height: 4px;
  background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
  transform: translateX(-100%);
  transition: var(--transition);
}
.statItem:hover { transform: translateY(-2px); }
.statItem:hover::before { transform: translateX(0); }
.statValue { font-size: 28px; font-weight: 800; color: var(--primary-color); line-height: 1.1; }
.statLabel {
  font-size: 12px; font-weight: 700; color: var(--text-secondary);
  letter-spacing: .05em; text-transform: uppercase; margin-top: 6px;
}

/* ===== Filter dasar (grafik) ===== */
.filtersCard { margin-bottom: 20px; }
.filtersContent { padding: 16px; }
.filtersRow {
  display: grid; grid-template-columns: repeat(12, 1fr); gap: 12px;
}
.filterGroup { display: flex; flex-direction: column; gap: 6px; }
.filterGroup:nth-child(1),
.filterGroup:nth-child(2),
.filterGroup:nth-child(3) { grid-column: span 4; }

.filterLabel {
  font-size: 12px; font-weight: 700; color: var(--text-secondary);
  text-transform: uppercase; letter-spacing: .03em;
  -webkit-user-select: text; user-select: text;
}
.filterSelect {
  padding: 10px 12px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius);
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-size: 14px; font-weight: 600;
  outline: none; transition: var(--t-fast);
}
.filterSelect:hover { border-color: #cfd8df; }
.filterSelect:focus {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(30,127,79,.15);
}

.filterActions {
  display: flex; align-items: center; gap: 12px; margin-top: 12px; flex-wrap: wrap;
}
.resetFiltersButton, .clearSearchButton, .toggleSearchButton, .detailButton, .retryButton, .backButton, .paginationButton {
  -webkit-user-select: none;
  user-select: none;
  position: relative;
  overflow: hidden;
}
.resetFiltersButton {
  background: linear-gradient(90deg, var(--primary-color), var(--primary-strong));
  color: #fff; border: 0; border-radius: 10px;
  padding: 10px 14px; font-weight: 700; cursor: pointer;
  box-shadow: var(--shadow-light); transition: var(--t-fast);
}
.resetFiltersButton:hover { transform: translateY(-1px); box-shadow: var(--shadow-medium); }
.searchResultsInfo { color: var(--text-muted); font-size: 14px; }
.resultsText { color: var(--text-secondary); }

/* ===== Charts ===== */
.chartsSection { display: grid; gap: 18px; }
.pieChartsGrid, .barChartsGrid {
  display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 16px;
}
.chartCard { padding: 0; }
.chartHeader {
  padding: 16px 20px 12px;
  border-bottom: 1px solid var(--border-light);
  background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-hover) 100%);
}
.chartHeader h3 { font-size: 18px; font-weight: 700; color: var(--text-primary); }
.chartWrapper { padding: 12px 12px 16px; background: var(--bg-card); }

/* Tooltip Chart */
.customTooltip {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 10px;
  box-shadow: var(--shadow-medium);
  padding: 10px 12px;
  -webkit-user-select: none; user-select: none;
}
.tooltipContent { display: flex; flex-direction: column; gap: 4px; }
.tooltipLabel { font-size: 12px; color: var(--text-secondary); font-weight: 700; }
.tooltipValue { font-size: 14px; color: var(--text-primary); font-weight: 800; }

/* ===== Table ===== */
.tableCard { margin-top: 8px; }
.cardHeader {
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-light);
  background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-hover) 100%);
}
.tableHeaderContent { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
.tableControls { display: flex; align-items: center; gap: 10px; }

.itemsPerPageSelector { display: flex; align-items: center; gap: 8px; font-size: 14px; color: var(--text-secondary); }
.pageSelect {
  padding: 8px 10px; border: 1px solid var(--border-color);
  background: var(--bg-secondary); border-radius: 10px; font-weight: 600; outline: none;
}
.pageSelect:focus { border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(30,127,79,.15); }

.tableFilterSection { padding: 14px 16px; border-bottom: 1px solid var(--border-light); }

.tableFilterHeader {
  display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;
}
.toggleSearchButton {
  background: linear-gradient(90deg, var(--accent-color), var(--accent-strong));
  color: #1a1a1a; border: none; border-radius: 10px;
  padding: 8px 12px; font-weight: 800; cursor: pointer; transition: var(--t-fast);
}
.toggleSearchButton:hover { filter: brightness(.95); transform: translateY(-1px); }

.tableSearchSection { display: grid; gap: 12px; }

/* Simple search */
.simpleTableSearch, .simpleSearch {
  display: grid; grid-template-columns: 220px 1fr; gap: 10px; align-items: end;
}
.searchTypeSelector { display: flex; flex-direction: column; gap: 6px; }
.searchTypeSelector label { color: var(--text-secondary); font-weight: 700; -webkit-user-select: text; user-select: text; }
.searchTypeSelect {
  padding: 10px 12px; border: 1px solid var(--border-color); background: var(--bg-secondary);
  border-radius: 10px; font-weight: 600; outline: none;
}
.searchTypeSelect:focus { border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(30,127,79,.15); }

.searchInputWrapper { position: relative; display: flex; align-items: center; }
.searchInput {
  width: 100%; padding: 10px 40px 10px 12px;
  border: 1px solid var(--border-color); background: var(--bg-secondary);
  border-radius: 10px; outline: none; font-weight: 600;
  -webkit-user-select: text; user-select: text;
}
.searchInput:focus { border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(30,127,79,.15); }
.clearSearchButton {
  position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
  border: none; background: var(--bg-hover); color: var(--text-secondary);
  width: 28px; height: 28px; border-radius: 8px; cursor: pointer; font-weight: 800;
}
.clearSearchButton:hover { background: var(--border-light); }

/* Advanced search */
.advancedSearch { padding-top: 2px; }
.advancedSearchGrid,
.advancedTableSearch .advancedSearchGrid {
  display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 10px;
}
.advancedSearchField { display: flex; flex-direction: column; gap: 6px; }
.advancedSearchField label { color: var(--text-secondary); font-weight: 700; -webkit-user-select: text; user-select: text; }
.advancedSearchInput {
  padding: 10px 12px; border: 1px solid var(--border-color); background: var(--bg-secondary);
  border-radius: 10px; outline: none; font-weight: 600; -webkit-user-select: text; user-select: text;
}
.advancedSearchInput:focus { border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(30,127,79,.15); }
.advancedSearchActions { margin-top: 8px; }
.advancedSearchActions .clearSearchButton { position: static; transform: none; width: auto; height: auto; padding: 8px 12px; }

/* Additional table filters */
.tableAdditionalFilters { margin-top: 10px; }
.additionalFilterRow { display: grid; gap: 10px; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }

.tableFilterActions {
  display: flex; align-items: center; gap: 10px; margin-top: 10px; flex-wrap: wrap;
}
.tableSearchResultsInfo { color: var(--text-muted); }

/* Table core */
.tableWrapper { width: 100%; }
.tableScrollContainer { width: 100%; overflow: auto; }
.dataTable { width: 100%; border-collapse: separate; border-spacing: 0; }

.tableHead th {
  position: sticky; top: 0; z-index: 2;
  background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-hover) 100%);
  color: var(--text-secondary);
  border-bottom: 1px solid var(--border-light);
  font-size: 12px; text-transform: uppercase; letter-spacing: .05em;
  font-weight: 800; padding: 12px; text-align: left; white-space: nowrap;
  -webkit-user-select: none; user-select: none;
}
.tableHeader { cursor: default; }
.sortableHeader { cursor: pointer; user-select: none; -webkit-user-select: none; }
.sortIcon { margin-left: 6px; font-size: 12px; opacity: .75; }

.tableBody tr:nth-child(even) { background: rgba(0,0,0,0.015); }
.tableRow { border-bottom: 1px solid var(--border-light); transition: var(--t-fast); }
.tableRow:hover { background: var(--bg-hover); }

.tableCell { padding: 12px; font-size: 14px; color: var(--text-primary); vertical-align: middle; }
.numberCell { text-align: right; font-variant-numeric: tabular-nums; }

.npsn { font-weight: 800; letter-spacing: .02em; }
.schoolNameCell { display: flex; align-items: center; gap: 8px; }
.schoolName { font-weight: 700; color: var(--text-primary); -webkit-user-select: text; user-select: text; }
.schoolType, .location { color: var(--text-secondary); -webkit-user-select: text; user-select: text; }

.toiletGood { color: var(--ok); font-weight: 800; }
.toiletModerate { color: var(--warn); font-weight: 800; }
.toiletBad { color: var(--danger); font-weight: 800; }
.toiletTotal { color: var(--text-primary); font-weight: 800; }

.detailButton {
  background: linear-gradient(90deg, var(--primary-soft), var(--primary-color));
  color: #fff; border: none; border-radius: 10px;
  padding: 8px 12px; font-weight: 800; cursor: pointer;
  box-shadow: var(--shadow-light); transition: var(--t-fast);
}
.detailButton::after,
.resetFiltersButton::after,
.toggleSearchButton::after,
.backButton::after,
.paginationButton::after {
  content: ''; position: absolute; inset: 0;
  background: radial-gradient(120px 120px at var(--x,50%) var(--y,50%), rgba(255,255,255,.25), transparent 35%);
  opacity: 0; transition: opacity .25s ease;
}
.detailButton:hover::after,
.resetFiltersButton:hover::after,
.toggleSearchButton:hover::after,
.backButton:hover::after,
.paginationButton:hover::after { opacity: .4; }
.detailButton:active { transform: translateY(1px) scale(.99); }

.noDataCell { padding: 36px 12px; text-align: center; }
.noDataMessage { color: var(--text-secondary); }
.noDataIcon { display: block; font-size: 28px; opacity: .7; margin-bottom: 6px; }

/* ===== Pagination ===== */
.tableFooter {
  border-top: 1px solid var(--border-light);
  padding: 12px 16px;
  display: flex; align-items: center; justify-content: space-between; gap: 10px; flex-wrap: wrap;
}
.paginationInfo { color: var(--text-muted); font-size: 14px; -webkit-user-select: text; user-select: text; }

.paginationControls { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.paginationButton {
  background: var(--bg-secondary); color: var(--text-primary);
  border: 1px solid var(--border-color);
  border-radius: 10px; padding: 8px 12px; font-weight: 700; cursor: pointer;
  transition: var(--t-fast);
}
.paginationButton:hover { border-color: var(--primary-color); transform: translateY(-1px); }
.paginationButton.active {
  background: linear-gradient(90deg, var(--primary-color), var(--primary-strong));
  color: #fff; border-color: transparent;
}
.paginationButton.disabled,
.paginationButton:disabled { opacity: .5; cursor: not-allowed; transform: none; }

/* ===== Loading & Error ===== */
.loadingContainer { display: flex; align-items: center; justify-content: center; padding: 48px 16px; }
.loadingSpinner {
  width: 38px; height: 38px; border-radius: 50%;
  border: 3px solid var(--border-light); border-top-color: var(--primary-color);
  animation: spin 1s linear infinite; margin-right: 10px;
}
.loadingText { color: var(--text-secondary); font-weight: 700; }

@keyframes spin { to { transform: rotate(360deg); } }

.errorContainer { padding: 20px; display: grid; gap: 8px; justify-items: start; }
.errorIcon { font-size: 24px; }
.errorMessage { color: var(--danger); -webkit-user-select: text; user-select: text; }
.retryButton {
  margin-top: 6px; background: var(--bg-secondary); color: var(--text-primary);
  border: 1px solid var(--border-color); border-radius: 10px; padding: 8px 12px; font-weight: 800; cursor: pointer;
}
.retryButton:hover { border-color: var(--primary-color); }

/* ===== Badge Jenjang ===== */
.badge {
  display: inline-flex; align-items: center; justify-content: center;
  padding: 4px 8px; border-radius: 999px;
  font-size: 12px; font-weight: 800; letter-spacing: .02em;
  border: 1px solid transparent; min-width: 56px; text-align: center;
  -webkit-user-select: none; user-select: none;
}
.badgePAUD { background: #E8FFF3; color: #0B7A46; border-color: #B9E7CF; }
.badgeSD   { background: #FFF9E6; color: #8A6A00; border-color: #F3DF9A; }
.badgeSMP  { background: #EAF3FF; color: #1953A2; border-color: #BED2F5; }
.badgePKBM { background: #FFF0F3; color: #A21B3C; border-color: #F3C2CD; }

/* ===== Back Button (detail) ===== */
.backButton {
  background: linear-gradient(90deg, var(--accent-color), var(--accent-strong));
  color: #122110; border: none; border-radius: 10px;
  padding: 10px 14px; font-weight: 800; cursor: pointer; transition: var(--t-fast);
}
.backButton:hover { filter: brightness(.95); transform: translateY(-1px); }

/* ===== Search umum ===== */
.searchSection { padding: 14px 16px; }
.searchHeader { display: flex; align-items: center; justify-content: space-between; gap: 10px; margin-bottom: 10px; }

/* ===== Utilities ===== */
.text-ellipsis { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* Scrollbar */
.pageWrapper ::-webkit-scrollbar { width: 8px; height: 8px; }
.pageWrapper ::-webkit-scrollbar-track { background: var(--bg-hover); border-radius: 4px; }
.pageWrapper ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 4px; transition: var(--t-fast); }
.pageWrapper ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

/* ===== Responsive ===== */
@media (max-width: 1200px) {
  .pageWrapper { padding: 18px 10px; }
  .filtersRow { grid-template-columns: 1fr 1fr; }
}
@media (max-width: 768px) {
  .pageWrapper { padding: 14px 8px; }
  .simpleTableSearch, .simpleSearch { grid-template-columns: 1fr; gap: 8px; }
  .tableHeaderContent { flex-direction: column; align-items: flex-start; gap: 8px; }
  .itemsPerPageSelector span { display: none; }
}
@media (max-width: 560px) {
  .filtersRow { grid-template-columns: 1fr; }
  .statValue { font-size: 24px; }
}

/* ===== Motion preferences ===== */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* ===== Print ===== */
@media print {
  .pageWrapper { background: #fff; color: #000; padding: 12px; }
  .card { box-shadow: none; border: 1px solid #ccc; break-inside: avoid; margin-bottom: 12px; }
  .filtersCard, .tableFilterSection, .searchSection { display: none; }
}
